# 小程序配置指南

## 一、使用微信开发者工具

### 1. 安装微信开发者工具
下载地址：https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html

### 2. 打开项目
1. 启动微信开发者工具
2. 点击 "导入项目" 或 "+" 按钮
3. 选择项目目录：`D:\my-projects\tiktok-hot-info\miniprogram`
4. 填写项目信息：
   - AppID：选择 "测试号"（如果没有正式 AppID）
   - 项目名称：TikTok B2B 工厂信息
   - 开发模式：小程序

## 二、配置说明

### 当前配置
```javascript
// miniprogram/app.js
apiBase: 'http://localhost:3000/api'
```

### 开发阶段（本地测试）
当前配置适用于本地开发，后端服务需要先启动：
```bash
cd backend
npm start
```

### 生产环境（正式发布）
需要修改 `app.js` 中的 `apiBase` 为实际服务器地址：
```javascript
apiBase: 'https://your-domain.com/api'
```

## 三、注意事项

### 1. 网络请求配置
在正式发布前，需要在微信公众平台配置服务器域名白名单：
- 登录微信公众平台：https://mp.weixin.qq.com
- 进入 "开发" -> "开发管理" -> "开发设置"
- 在 "服务器域名" 中添加：
  - request 合法域名：`https://your-domain.com`

### 2. 本地测试
开发阶段可以在开发者工具中：
- 点击右上角 "详情"
- 勾选 "不校验合法域名、web-view（业务域名）、TLS 版本以及 HTTPS 证书"

## 四、项目结构说明

```
miniprogram/
├── app.js          # 小程序入口，已配置 API 地址
├── app.json        # 小程序配置
├── app.wxss        # 全局样式
├── sitemap.json    # 站点地图
└── pages/
    ├── index/      # 首页：行业搜索
    ├── region/     # 地区选择页
    └── detail/     # 工厂详情页
```

## 五、快速测试

### 测试步骤
1. 确保后端服务已启动（http://localhost:3000）
2. 在微信开发者工具中点击 "编译"
3. 查看控制台输出，确认数据加载成功

### 预期效果
- 控制台显示：`地区列表加载成功: 4 个地区`
- 控制台显示：`行业列表加载成功: 8 个行业`
- 页面显示行业选择列表

## 六、常见问题

### Q1: 请求失败？
**A**: 检查后端服务是否启动：`http://localhost:3000/health`

### Q2: 数据不显示？
**A**:
1. 检查控制台是否有错误
2. 确认已勾选 "不校验合法域名"
3. 查看网络请求是否成功

### Q3: 如何修改 API 地址？
**A**: 编辑 `miniprogram/app.js` 第 5 行的 `apiBase` 值

## 七、功能演示

### 新客户签单流程
1. 打开小程序
2. 点击 "纺织服装" 行业
3. 查看 "出口概况" 卡片
4. 对比各地区数据
5. 推荐合适的目标国家

### 老客户维护流程
1. 点击右下角 "每周报告" 按钮
2. 查看自动生成的报告
3. 点击分享按钮
4. 发送到客户群

## 八、后续开发

如需正式发布，需要：
1. 注册小程序账号
2. 获取正式 AppID
3. 准备服务器和域名
4. 配置 HTTPS 证书
5. 提交审核

---

如有问题，请查看 `README.md` 或 `需求讨论记录.txt`
