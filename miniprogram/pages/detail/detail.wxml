<!--pages/detail/detail.wxml - ä¼˜åŒ–ç‰ˆæœ¬ -->
<view class="container" wx:if="{{item}}">
  <!-- è§†é¢‘å°é¢ -->
  <view class="cover-section">
    <image class="cover-image" src="{{item.coverImage}}" mode="aspectFill" />
    <view class="play-btn"></view>
  </view>

  <!-- å†…å®¹ä¿¡æ¯ -->
  <view class="content-section card">
    <view class="tags">
      <text class="tag primary">{{regionName}}</text>
      <text class="tag hot">çƒ­é—¨</text>
    </view>

    <view class="title">{{item.title}}</view>
    <view class="description">{{item.description}}</view>

    <!-- æ•°æ®ç»Ÿè®¡ -->
    <view class="stats-grid">
      <view class="stat-card">
        <text class="stat-value">{{formatNumber(item.stats.views)}}</text>
        <text class="stat-label">æ’­æ”¾é‡</text>
      </view>
      <view class="stat-card">
        <text class="stat-value">{{formatNumber(item.stats.likes)}}</text>
        <text class="stat-label">ç‚¹èµæ•°</text>
      </view>
      <view class="stat-card">
        <text class="stat-value">{{formatNumber(item.stats.comments)}}</text>
        <text class="stat-label">è¯„è®ºæ•°</text>
      </view>
      <view class="stat-card highlight">
        <text class="stat-value">+{{item.stats.growth}}%</text>
        <text class="stat-label">å¢é•¿ç‡</text>
      </view>
    </view>
  </view>

  <!-- å•†å“ä¿¡æ¯ -->
  <view class="product-section card" wx:if="{{item.product}}">
    <view class="section-title">
      <view class="icon-cart" style="width: 32rpx; height: 32rpx;"></view>
      <text>ç›¸å…³å•†å“</text>
    </view>
    <view class="product-info">
      <view class="product-main">
        <text class="product-price">${{item.product.price}}</text>
        <text class="product-shop">{{item.product.shop}}</text>
      </view>
      <view class="product-stats">
        <text class="sales">å·²å”® {{formatNumber(item.stats.sales)}}</text>
        <view class="growth">
          <view class="icon-trend" style="width: 24rpx; height: 24rpx;"></view>
          <text>å¢é•¿ +{{item.stats.growth}}%</text>
        </view>
      </view>
    </view>
    <button class="btn-view-product">æŸ¥çœ‹å•†å“è¯¦æƒ…</button>
  </view>

  <!-- å¸‚åœºåˆ†æ -->
  <view class="analysis-section card">
    <view class="section-title">
      <view class="icon-chart" style="width: 32rpx; height: 32rpx;"></view>
      <text>å¸‚åœºä¿¡å·åˆ†æ</text>
    </view>
    <view class="analysis-content">
      <view class="analysis-item">
        <text class="analysis-label">å¸‚åœºéœ€æ±‚</text>
        <view class="analysis-bar">
          <view class="bar-fill" style="width: 85%"></view>
        </view>
        <text class="analysis-value">é«˜éœ€æ±‚</text>
      </view>
      <view class="analysis-item">
        <text class="analysis-label">ä»·æ ¼ç«äº‰åŠ›</text>
        <view class="analysis-bar">
          <view class="bar-fill" style="width: 70%"></view>
        </view>
        <text class="analysis-value">ä¸­æ¡£ä»·ä½</text>
      </view>
      <view class="analysis-item">
        <text class="analysis-label">è¶‹åŠ¿æŒç»­</text>
        <view class="analysis-bar">
          <view class="bar-fill" style="width: 90%"></view>
        </view>
        <text class="analysis-value">æŒç»­ä¸Šå‡</text>
      </view>
    </view>
  </view>

  <!-- æµ®åŠ¨æ“ä½œæŒ‰é’® -->
  <view class="floating-action-bar">
    <button class="fab-button" bindtap="shareItem">
      <view class="fab-icon">
        <text style="font-size: 36rpx;">â¤´</text>
      </view>
    </button>
    <button class="fab-button primary" bindtap="generatePoster">
      <view class="fab-icon">
        <text style="font-size: 40rpx;">ğŸ“„</text>
      </view>
      <view class="fab-badge">æµ·æŠ¥</view>
    </button>
  </view>
</view>

<!-- åŠ è½½çŠ¶æ€ -->
<view class="loading" wx:if="{{loading}}">
  <view class="loading-spinner"></view>
  <text class="loading-text">åŠ è½½ä¸­...</text>
</view>

<!-- ç©ºçŠ¶æ€ -->
<view class="empty" wx:if="{{!item && !loading}}">
  <text class="empty-text">å†…å®¹ä¸å­˜åœ¨</text>
</view>
