<!--pages/poster/poster.wxml - 海报预览页面-->
@import "/styles/icons.wxss"

<view class="container">
  <!-- 海报 Canvas -->
  <view class="poster-wrapper">
    <canvas type="2d" id="posterCanvas" class="poster-canvas"></canvas>
  </view>

  <!-- 操作按钮 -->
  <view class="action-bar">
    <button class="action-btn secondary" bindtap="regenerate">
      <view class="icon-wrapper">
        <text class="icon-sync">↻</text>
      </view>
      <text>重新生成</text>
    </button>
    <button class="action-btn secondary" bindtap="sharePoster">
      <view class="icon-wrapper">
        <text class="icon-share">⤴</text>
      </view>
      <text>分享</text>
    </button>
    <button class="action-btn primary" bindtap="saveToAlbum">
      <view class="icon-wrapper">
        <text class="icon-download">⬇</text>
      </view>
      <text>保存到相册</text>
    </button>
  </view>

  <!-- 模板选择 -->
  <view class="template-section">
    <view class="section-title">
      <text class="title-icon">🎨</text>
      <text>选择模板风格</text>
    </view>
    <scroll-view scroll-x class="template-scroll" show-scrollbar="{{false}}">
      <view class="template-item {{currentTemplate === item.id ? 'active' : ''}}"
            wx:for="{{templates}}"
            wx:key="id"
            bindtap="selectTemplate"
            data-id="{{item.id}}">
        <view class="template-preview">
          <text class="template-icon">{{item.icon}}</text>
          <text class="template-name">{{item.name}}</text>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- 使用说明 -->
  <view class="tips-section">
    <view class="tips-title">💡 小提示</view>
    <view class="tips-list">
      <text class="tip-item">• 点击模板切换不同风格</text>
      <text class="tip-item">• 点击"重新生成"可刷新海报</text>
      <text class="tip-item">• 保存后可直接分享到朋友圈</text>
    </view>
  </view>

  <!-- 加载中 -->
  <view class="loading-overlay" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">正在生成海报...</text>
  </view>
</view>
